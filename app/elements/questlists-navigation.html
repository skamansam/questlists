<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/paper-styles/typography.html">

<!--
  This element handles all navigation for the entire app. It will broadcast a navigation element you can use.
-->

<dom-module id="questlists-navigation">
  <style include="shared-styles"></style>
  <style>
    paper-menu {
      --paper-menu-selected-item: {
        color: var(--dark-accent-color);
        background-color: var(--light-accent-color);
      }

      --paper-menu-focused-item-after: {
        background: var(--primary-color);
      }
    }

    paper-menu iron-icon {
      color: var(--menu-link-color);
      margin-right: 33px;
      opacity: 1.00;
    }

    paper-menu .iron-selected iron-icon {
      color: var(--primary-color);
    }

    paper-menu .iron-selected {
      color: var(--primary-color);
    }

    paper-menu .menu-item {
      @apply(--layout-horizontal);
      @apply(--layout-center);

      text-decoration: none;
      color: var(--menu-link-color);
      font-family: 'Roboto', 'Noto', sans-serif;
      -webkit-font-smoothing: antialiased;
      text-rendering: optimizeLegibility;
      font-size: 14px;
      font-weight: 400;
      line-height: 24px;
      min-height: 48px;
      padding: 0 16px;
      cursor: pointer;
    }


  </style>
  <template>
    <!-- Routing -->
    <app-location route="{{route}}" use-hash-as-path></app-location>

    <app-route route="{{route}}"
              pattern="/:page"
              data="{{currentRequest}}"
              tail="{{currentRequestData}}"></app-route>

    <!-- Drawer Content -->
    <paper-menu class="app-menu" attr-for-selected="data-route" selectable=".selectable" selected="{{currentRequest.page}}">
      <div class="menu-item selectable" data-route="home">
        <iron-icon icon="home"></iron-icon>
        <span>Home</span>
      </div>

      <div class="menu-item selectable" data-route="favorites">
        <iron-icon icon="star"></iron-icon>
        <span>Favorites</span>
      </div>

      <div class="menu-item selectable" data-route="browse">
        <iron-icon icon="dashboard"></iron-icon>
        <span>Browse</span>
      </div>

      <div class="menu-item selectable" data-route="users">
        <iron-icon icon="social:people"></iron-icon>
        <span>Users</span>
      </div>

      <div class="menu-item selectable" data-route="about">
        <iron-icon icon="info"></iron-icon>
        <span>About</span>
      </div>

      <div class="menu-item selectable" data-route="settings">
        <iron-icon icon="settings"></iron-icon>
        <span>Settings</span>
      </div>

      <div class="menu-item" on-tap="show_changes">
        <iron-icon icon="grade"></iron-icon>
        <span>What's New?</span>
      </div>

    </paper-menu>
    <questlists-changes id="changes"></questlists-changes>
  </template>
</dom-module>

<script>
window.addEventListener('WebComponentsReady', function() {
  Polymer({
    is: 'questlists-navigation',
    properties: {
      route: {
        type: Object,
        notify: true
      },
      currentPage: {
        type: Object,
        notify: true
      },
      currentRequestData: {
        type: Object,
        notify: true
      },
      currentRequest: {
        type: Object,
        notify: true
      }
    },
    observers: [
      'pageChanged(currentRequest)'
    ],
    show_changes: function(){
      this.$.changes.show()
    },
    /** Fired when the top-level route has changed.
    */
    pageChanged: function(selectedPage){
    },
    ready: function(){
      if (!this.route.path) {
        this.set('route.path', '/home');
      }
    }
  });
});
</script>
