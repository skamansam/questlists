.navbar.navbar-default
  .container
    .navbar-header
      %button.navbar-toggle{"data-target" => ".navbar-collapse", "data-toggle" => "collapse", type: "button"}
        %span.icon-bar
        %span.icon-bar
        %span.icon-bar
      %a.navbar-brand{href: "/"} Questlists
    .navbar-collapse.collapse
      %ul.nav.navbar-nav
        %li.active
          =link_to "Home",root_path
        %li.dropdown
          %a.dropdown-toggle{"data-toggle" => "dropdown", href: "#"}
            Lists
            %b.caret
          %ul.dropdown-menu
            - if current_user
              %li.dropdown-header
                My Lists
                %b.caret
              - List.owned_by(current_user).top_level.each do |list|
                %li
                  = link_to list.title, list
              %li.divider
            %li.dropdown-header= link_to raw("All Lists <b class='caret'></b>"), lists_path
            - all_lists = List.top_level
            - if all_lists.count < 1
              %li
                = create_auth_link "Sorry! There are no Lists!", new_list_path
            - all_lists.each do |list|
              %li
                = link_to list.title, list
        %li
          = create_auth_link "Add Your List...", new_list_path
      %ul.nav.navbar-nav.navbar-right
        - if user_signed_in?
          %li
            %a{:href=>preferences_path}
              Welcome, #{current_user.username || current_user.email}
          %li= link_to "Log Out",destroy_user_session_path, method: :delete
        - else
          = form_for(resource, :as => resource_name, :url => session_path(resource_name),:html=>{:class=>"navbar-form"})  do |f|
            .form-group
              = f.text_field :email, :placeholder=>"email", :class=>"form-control"
            .form-group
              = f.password_field :password, :placeholder=>"password", :class=>"form-control"
            .form-group
              %button.btn.btn-success{type: "submit"} Sign In
